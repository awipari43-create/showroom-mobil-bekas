<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KendaraanKu | Solusi Mobil Bekas Terpercaya</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700;900&family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --accent-copper: #b87333;
        --warm-brown: #6b4423;
        --light-cream: #f5f5dc;
        --dark-bg: #2c2416;
        --card-bg: #3e342a;
      }

      body {
        font-family: "Inter", sans-serif;
        background-color: var(--dark-bg);
        color: var(--light-cream);
      }

      .font-merriweather {
        font-family: "Merriweather", serif;
      }

      /* Smooth Scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Reveal on Scroll */
      .reveal {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.7s ease-out, transform 0.7s ease-out;
      }
      .reveal.active {
        opacity: 1;
        transform: translateY(0);
      }

      /* Card Styles */
      .car-card {
        background-color: var(--card-bg);
        transition: all 0.5s ease;
        border: 1px solid transparent;
      }
      .car-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        border-color: var(--accent-copper);
      }
      .car-card img {
        transition: transform 0.6s ease;
      }
      .car-card:hover img {
        transform: scale(1.08);
      }

      /* Button Styles */
      .btn-primary {
        background-color: var(--accent-copper);
        color: var(--light-cream);
        font-weight: 600;
        padding: 12px 24px;
        border-radius: 8px;
        transition: all 0.3s ease;
        display: inline-block;
        text-align: center;
      }
      .btn-primary:hover {
        background-color: #a0622a;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(184, 115, 51, 0.4);
      }

      .btn-secondary {
        background-color: transparent;
        color: var(--accent-copper);
        border: 2px solid var(--accent-copper);
        font-weight: 600;
        padding: 10px 22px;
        border-radius: 8px;
        transition: all 0.3s ease;
        display: inline-block;
        text-align: center;
      }
      .btn-secondary:hover {
        background-color: var(--accent-copper);
        color: var(--light-cream);
      }

      .btn-outline {
        background-color: transparent;
        color: var(--light-cream);
        border: 1px solid #5c4a3a;
        font-weight: 500;
        padding: 10px 20px;
        border-radius: 8px;
        transition: all 0.3s ease;
      }
      .btn-outline:hover {
        border-color: var(--light-cream);
      }

      /* Navbar on scroll */
      .navbar-scrolled {
        background-color: rgba(44, 36, 22, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      /* Input & Select */
      .form-input {
        background-color: var(--card-bg);
        border: 1px solid #5c4a3a;
        color: var(--light-cream);
        transition: border-color 0.3s ease;
      }
      .form-input:focus {
        outline: none;
        border-color: var(--accent-copper);
        box-shadow: 0 0 0 3px rgba(184, 115, 51, 0.1);
      }

      /* Promo Banner */
      .promo-banner {
        background: linear-gradient(
          90deg,
          var(--warm-brown),
          var(--accent-copper)
        );
      }

      /* Custom Checkbox for Compare */
      .compare-checkbox {
        appearance: none;
        width: 20px;
        height: 20px;
        border: 2px solid #8b7355;
        border-radius: 4px;
        transition: all 0.2s ease;
        cursor: pointer;
      }
      .compare-checkbox:checked {
        background-color: var(--accent-copper);
        border-color: var(--accent-copper);
      }
      .compare-checkbox:checked::after {
        content: "âœ”";
        display: block;
        text-align: center;
        color: var(--light-cream);
        font-size: 14px;
        line-height: 16px;
      }

      /* Loading Spinner */
      .spinner {
        border: 4px solid rgba(255, 255, 255, 0.1);
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border-left-color: var(--accent-copper);
        animation: spin 1s ease infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: var(--dark-bg);
      }
      ::-webkit-scrollbar-thumb {
        background: var(--accent-copper);
        border-radius: 4px;
      }

      /* Detail Page Specific Styles */
      .thumbnail {
        transition: all 0.3s ease;
        border: 2px solid transparent;
        cursor: pointer;
      }
      .thumbnail:hover,
      .thumbnail.active {
        border-color: var(--accent-copper);
      }

      .tab-nav {
        border-bottom: 2px solid #5c4a3a;
      }
      .tab-nav button {
        transition: all 0.3s ease;
        position: relative;
      }
      .tab-nav button.active::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: var(--accent-copper);
      }

      .spec-table tr {
        border-bottom: 1px solid #5c4a3a;
      }
      .spec-table tr:last-child {
        border-bottom: none;
      }

      /* FITUR BARU: Wishlist & Trade-in Styles */
      .wishlist-btn .fa-heart.active {
        color: #ef4444; /* Red-500 */
      }

      .form-step {
        display: none;
      }
      .form-step.active {
        display: block;
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateX(20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .trade-in-result {
        background: linear-gradient(135deg, #1e293b, #334155);
        border: 1px solid #475569;
      }
    </style>
  </head>
  <body class="bg-stone-900 text-stone-100">
    <!-- Header & Navigation -->
    <header
      id="navbar"
      class="fixed w-full top-0 z-50 transition-all duration-500"
    >
      <nav
        class="container mx-auto px-8 py-5 flex justify-between items-center"
      >
        <a
          href="#"
          id="nav-logo"
          class="text-3xl font-merriweather font-bold tracking-tight"
        >
          Kendaraan<span class="text-orange-600">Ku</span>
        </a>
        <div class="hidden md:flex space-x-8 items-center">
          <a
            href="#inventory"
            id="nav-inventory"
            class="nav-link text-stone-300 hover:text-white transition-colors duration-300"
            >Stok Mobil</a
          >
          <!-- FITUR BARU: Link ke halaman Jual Mobil -->
          <a
            href="#"
            id="nav-trade-in"
            class="nav-link text-stone-300 hover:text-white transition-colors duration-300"
            >Jual Mobil</a
          >
          <a
            href="#promo"
            class="nav-link text-stone-300 hover:text-white transition-colors duration-300"
            >Promo</a
          >
          <a
            href="#credit"
            class="nav-link text-stone-300 hover:text-white transition-colors duration-300"
            >Simulasi Kredit</a
          >
          <a
            href="#contact"
            class="nav-link text-stone-300 hover:text-white transition-colors duration-300"
            >Kontak</a
          >
          <!-- FITUR BARU: Link ke halaman Wishlist -->
          <a
            href="#"
            id="nav-wishlist"
            class="nav-link text-stone-300 hover:text-white transition-colors duration-300 relative"
          >
            <i class="fas fa-heart"></i> Wishlist
            <span
              id="wishlist-count"
              class="absolute -top-2 -right-3 bg-orange-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"
              >0</span
            >
          </a>
          <a
            href="https://wa.me/628123456789?text=Halo%20KendaraanKu,%20saya%20mau%20tanya%20mobil"
            target="_blank"
            class="btn-primary"
          >
            <i class="fab fa-whatsapp mr-2"></i>Hubungi Kami
          </a>
        </div>
        <button id="mobile-menu-btn" class="md:hidden text-white">
          <i class="fas fa-bars text-2xl"></i>
        </button>
      </nav>
    </header>

    <main>
      <!-- HOME VIEW -->
      <div id="home-view">
        <!-- Hero Section -->
        <section class="relative min-h-screen flex items-center justify-center">
          <img
            src="https://images.unsplash.com/photo-1550355291-bbee04a92027?q=80&w=2070"
            alt="Hero Car"
            class="absolute inset-0 w-full h-full object-cover"
          />
          <div
            class="absolute inset-0 bg-gradient-to-t from-stone-900 via-stone-900/70 to-transparent"
          ></div>
          <div class="relative container mx-auto px-8 text-center z-10">
            <h1
              class="text-5xl md:text-7xl font-merriweather font-bold leading-tight mb-6 reveal"
            >
              Kualitas dan
              <span class="text-orange-600">Kepercayaan</span> dalam Setiap
              Kendaraan
            </h1>
            <p
              class="text-lg md:text-xl text-stone-300 mb-10 max-w-2xl mx-auto reveal"
            >
              Temukan mobil idaman Anda dengan harga terbaik. Lulus inspeksi
              ketat dan dokumen dijamin lengkap.
            </p>
            <div class="flex flex-col sm:flex-row gap-6 justify-center reveal">
              <a href="#inventory" class="btn-primary text-lg">
                <i class="fas fa-search mr-2"></i>Lihat Stok Mobil
              </a>
              <!-- FITUR BARU: Tombol CTA ke halaman Jual Mobil -->
              <button id="hero-trade-in-btn" class="btn-secondary text-lg">
                <i class="fas fa-car-side mr-2"></i>Jual Mobil Sekarang
              </button>
            </div>
          </div>
        </section>

        <!-- Promo Section -->
        <section id="promo" class="promo-banner py-6 text-center">
          <div class="container mx-auto px-8">
            <p class="text-white font-semibold text-lg reveal">
              <i class="fas fa-tag mr-2"></i>PROMO BULAN INI: Gratis Biaya
              Administrasi & Asuransi untuk semua pembelian kredit!
            </p>
          </div>
        </section>

        <!-- Inventory Section -->
        <section id="inventory" class="py-20 bg-stone-800">
          <div class="container mx-auto px-8">
            <div
              class="flex flex-col md:flex-row justify-between items-center mb-12"
            >
              <div class="mb-4 md:mb-0 reveal">
                <h2 class="text-4xl font-merriweather font-bold mb-2">
                  Stok Mobil Kami
                </h2>
                <p class="text-stone-400">
                  Pilihan terbaik dengan harga yang kompetitif.
                </p>
              </div>
              <div class="flex items-center gap-4 reveal">
                <span class="text-sm text-stone-400">Bandingkan:</span>
                <button
                  id="compare-btn"
                  class="btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"
                  disabled
                >
                  <i class="fas fa-balance-scale mr-2"></i>Bandingkan (<span
                    id="compare-count"
                    >0</span
                  >)
                </button>
              </div>
            </div>

            <!-- Filter Section -->
            <div class="bg-stone-700 p-6 rounded-xl mb-12 reveal">
              <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <select
                  id="filter-brand"
                  class="filter-select form-input px-4 py-3 rounded-lg"
                >
                  <option value="all">Semua Merek</option>
                  <option value="toyota">Toyota</option>
                  <option value="honda">Honda</option>
                  <option value="suzuki">Suzuki</option>
                  <option value="daihatsu">Daihatsu</option>
                  <option value="mitsubishi">Mitsubishi</option>
                </select>
                <select
                  id="filter-price"
                  class="filter-select form-input px-4 py-3 rounded-lg"
                >
                  <option value="all">Semua Harga</option>
                  <option value="0-200">&lt; 200 Juta</option>
                  <option value="200-350">200 - 350 Juta</option>
                  <option value="350+">&gt; 350 Juta</option>
                </select>
                <select
                  id="filter-type"
                  class="filter-select form-input px-4 py-3 rounded-lg"
                >
                  <option value="all">Semua Tipe</option>
                  <option value="mpv">MPV</option>
                  <option value="hatchback">Hatchback</option>
                  <option value="suv">SUV</option>
                  <option value="sedan">Sedan</option>
                </select>
                <button
                  id="filter-btn"
                  class="btn-primary rounded-lg text-lg font-bold"
                >
                  Cari Mobil
                </button>
              </div>
            </div>

            <!-- Car Grid -->
            <div
              id="car-grid"
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
            >
              <!-- Cars will be dynamically inserted here -->
            </div>
            <div id="no-results" class="hidden text-center py-10 reveal">
              <p class="text-xl text-stone-500">
                Maaf, tidak ada mobil yang sesuai dengan kriteria Anda.
              </p>
            </div>

            <!-- Load More Button -->
            <div class="text-center mt-12">
              <button id="load-more-btn" class="btn-secondary text-lg">
                <i class="fas fa-plus-circle mr-2"></i>Lihat Lainnya
              </button>
              <div
                id="loading-spinner"
                class="spinner mx-auto mt-4 hidden"
              ></div>
            </div>
          </div>
        </section>

        <!-- Credit Simulation Section -->
        <section id="credit" class="py-20 bg-stone-900">
          <div class="container mx-auto px-8">
            <div class="text-center mb-16 reveal">
              <h2 class="text-4xl font-merriweather font-bold mb-4">
                Simulasi Kredit
              </h2>
              <p class="text-stone-400">
                Rencanakan cicilan dengan mudah dan transparan.
              </p>
            </div>
            <div class="max-w-2xl mx-auto bg-stone-800 p-10 rounded-2xl reveal">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div>
                  <label
                    for="car-price"
                    class="block text-sm font-medium text-stone-400 mb-2"
                    >Harga Mobil (Rp)</label
                  >
                  <input
                    type="number"
                    id="car-price"
                    class="form-input w-full px-4 py-3 rounded-lg"
                    placeholder="Contoh: 250000000"
                  />
                </div>
                <div>
                  <label
                    for="dp"
                    class="block text-sm font-medium text-stone-400 mb-2"
                    >Uang Muka (DP)</label
                  >
                  <input
                    type="number"
                    id="dp"
                    class="form-input w-full px-4 py-3 rounded-lg"
                    placeholder="Contoh: 50000000"
                  />
                </div>
              </div>
              <div class="mb-8">
                <label
                  for="tenor"
                  class="block text-sm font-medium text-stone-400 mb-2"
                  >Tenor (Tahun)</label
                >
                <select
                  id="tenor"
                  class="form-input w-full px-4 py-3 rounded-lg"
                >
                  <option value="1">1 Tahun</option>
                  <option value="2">2 Tahun</option>
                  <option value="3">3 Tahun</option>
                  <option value="4" selected>4 Tahun</option>
                  <option value="5">5 Tahun</option>
                </select>
              </div>
              <button
                id="calculate-btn"
                class="btn-primary w-full py-4 rounded-lg text-lg font-bold"
              >
                <i class="fas fa-calculator mr-2"></i>Hitung Cicilan
              </button>
              <div
                id="credit-result"
                class="mt-10 p-6 bg-stone-700 rounded-xl hidden"
              >
                <p class="text-sm text-stone-400">Estimasi Cicilan Bulanan:</p>
                <p
                  id="monthly-installment"
                  class="text-4xl font-bold text-orange-600 mt-2"
                ></p>
                <p class="text-xs text-stone-500 mt-4">
                  *Hasil simulasi ini bisa berbeda tergantung perusahaan
                  leasing.
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 bg-stone-800">
          <div class="container mx-auto px-8">
            <div class="text-center mb-16 reveal">
              <h2 class="text-4xl font-merriweather font-bold mb-4">
                Hubungi Kami
              </h2>
              <p class="text-stone-400">
                Kami siap membantu Anda menemukan mobil impian.
              </p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
              <div class="reveal">
                <div class="p-8 bg-stone-700 rounded-2xl">
                  <i
                    class="fas fa-map-marker-alt text-4xl text-orange-600 mb-4"
                  ></i>
                  <h3 class="text-xl font-semibold mb-2">Alamat</h3>
                  <p class="text-stone-400">
                    Jl. Sultan Agung No. 123, Jakarta
                  </p>
                </div>
              </div>
              <div class="reveal">
                <div class="p-8 bg-stone-700 rounded-2xl">
                  <i class="fas fa-phone-alt text-4xl text-orange-600 mb-4"></i>
                  <h3 class="text-xl font-semibold mb-2">Telepon</h3>
                  <a
                    href="tel:02112345678"
                    class="text-stone-400 hover:text-white transition-colors"
                    >021-1234-5678</a
                  >
                </div>
              </div>
              <div class="reveal">
                <div class="p-8 bg-stone-700 rounded-2xl">
                  <i class="fab fa-whatsapp text-4xl text-orange-600 mb-4"></i>
                  <h3 class="text-xl font-semibold mb-2">WhatsApp</h3>
                  <a
                    href="https://wa.me/628123456789"
                    target="_blank"
                    class="text-stone-400 hover:text-white transition-colors"
                    >0812-3456-789</a
                  >
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- FITUR BARU: TRADE-IN VIEW -->
      <div id="trade-in-view" class="hidden pt-24 pb-12">
        <div class="container mx-auto px-8 max-w-4xl">
          <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-merriweather font-bold mb-4">
              Jual Mobil Anda dengan Mudah
            </h1>
            <p class="text-lg text-stone-400">
              Dapatkan penawaran terbaik untuk mobil Anda. Proses cepat,
              transparan, dan aman.
            </p>
          </div>

          <div class="bg-stone-800 rounded-2xl p-8 md:p-12">
            <form id="trade-in-form">
              <!-- Step 1: Data Kendaraan -->
              <div class="form-step active" id="step-1">
                <h2 class="text-2xl font-semibold mb-6">
                  Langkah 1: Data Kendaraan Anda
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Merek Mobil</label
                    >
                    <select
                      id="trade-brand"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      required
                    >
                      <option value="">Pilih Merek</option>
                      <option value="toyota">Toyota</option>
                      <option value="honda">Honda</option>
                      <option value="suzuki">Suzuki</option>
                      <option value="daihatsu">Daihatsu</option>
                      <option value="mitsubishi">Mitsubishi</option>
                      <option value="lainnya">Lainnya</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Tipe / Model</label
                    >
                    <input
                      type="text"
                      id="trade-model"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      placeholder="Contoh: Avanza Veloz"
                      required
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Tahun</label
                    >
                    <input
                      type="number"
                      id="trade-year"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      placeholder="Contoh: 2019"
                      min="1990"
                      max="2024"
                      required
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Transmisi</label
                    >
                    <select
                      id="trade-transmission"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      required
                    >
                      <option value="">Pilih Transmisi</option>
                      <option value="Manual">Manual</option>
                      <option value="Automatic">Automatic</option>
                    </select>
                  </div>
                </div>
                <div class="mt-8 text-right">
                  <button type="button" class="btn-next btn-primary">
                    Lanjutkan <i class="fas fa-arrow-right ml-2"></i>
                  </button>
                </div>
              </div>

              <!-- Step 2: Kondisi & Kilometer -->
              <div class="form-step" id="step-2">
                <h2 class="text-2xl font-semibold mb-6">
                  Langkah 2: Kondisi & Kilometer
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Kilometer (KM)</label
                    >
                    <input
                      type="number"
                      id="trade-mileage"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      placeholder="Contoh: 75000"
                      required
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Warna</label
                    >
                    <input
                      type="text"
                      id="trade-color"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      placeholder="Contoh: Putih"
                      required
                    />
                  </div>
                  <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Kondisi Mesin</label
                    >
                    <select
                      id="trade-engine-condition"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      required
                    >
                      <option value="">Pilih Kondisi</option>
                      <option value="Sangat Baik">
                        Sangat Baik (Tidak ada masalah)
                      </option>
                      <option value="Baik">
                        Baik (Ada sedikit suara, tapi tidak mengganggu)
                      </option>
                      <option value="Cukup">
                        Cukup (Perlu sedikit perbaikan)
                      </option>
                      <option value="Buruk">
                        Buruk (Perlu perbaikan besar)
                      </option>
                    </select>
                  </div>
                  <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Kondisi Body & Cat</label
                    >
                    <select
                      id="trade-body-condition"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      required
                    >
                      <option value="">Pilih Kondisi</option>
                      <option value="Mulus Original">
                        Mulus Original (Tidak ada baret atau penyok)
                      </option>
                      <option value="Baik">Baik (Ada baret ringan)</option>
                      <option value="Cukup">
                        Cukup (Ada beberapa baret atau penyok kecil)
                      </option>
                      <option value="Pernah Disepuh">
                        Pernah Disepuh / Cat Ulang
                      </option>
                    </select>
                  </div>
                </div>
                <div class="mt-8 flex justify-between">
                  <button type="button" class="btn-prev btn-outline">
                    <i class="fas fa-arrow-left mr-2"></i> Kembali
                  </button>
                  <button type="button" class="btn-next btn-primary">
                    Lanjutkan <i class="fas fa-arrow-right ml-2"></i>
                  </button>
                </div>
              </div>

              <!-- Step 3: Data Penjual -->
              <div class="form-step" id="step-3">
                <h2 class="text-2xl font-semibold mb-6">
                  Langkah 3: Data Anda
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Nama Lengkap</label
                    >
                    <input
                      type="text"
                      id="trade-name"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      required
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Nomor Telepon / WhatsApp</label
                    >
                    <input
                      type="tel"
                      id="trade-phone"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      required
                    />
                  </div>
                  <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-stone-400 mb-2"
                      >Lengkapilah jika ada</label
                    >
                    <textarea
                      id="trade-notes"
                      class="form-input w-full px-4 py-3 rounded-lg"
                      rows="4"
                      placeholder="Contoh: Mobil pernah mengalami banjir kecil, atau ada aksesoris tambahan."
                    ></textarea>
                  </div>
                </div>
                <div class="mt-8 flex justify-between">
                  <button type="button" class="btn-prev btn-outline">
                    <i class="fas fa-arrow-left mr-2"></i> Kembali
                  </button>
                  <button type="submit" class="btn-primary">
                    Dapatkan Estimasi <i class="fas fa-calculator ml-2"></i>
                  </button>
                </div>
              </div>

              <!-- Result Step -->
              <div class="form-step" id="step-result">
                <h2 class="text-2xl font-semibold mb-6 text-center">
                  Terima Kasih!
                </h2>
                <div class="trade-in-result p-8 rounded-xl text-center">
                  <i
                    class="fas fa-check-circle text-6xl text-green-500 mb-4"
                  ></i>
                  <p class="text-lg mb-4">
                    Berdasarkan data yang Anda berikan, estimasi harga mobil
                    Anda adalah:
                  </p>
                  <p
                    id="trade-estimation"
                    class="text-4xl font-bold text-orange-600 mb-6"
                  >
                    Rp XXX.000.000
                  </p>
                  <p class="text-stone-400 mb-6">
                    Tim kami akan segera menghubungi Anda dalam 1x24 jam untuk
                    konfirmasi dan penawaran final.
                  </p>
                  <a
                    id="trade-whatsapp-link"
                    href="#"
                    target="_blank"
                    class="btn-primary"
                  >
                    <i class="fab fa-whatsapp mr-2"></i>Hubungi Kami via
                    WhatsApp
                  </a>
                </div>
                <div class="mt-8 text-center">
                  <button type="button" class="btn-reset btn-secondary">
                    Buat Penawaran Baru
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- FITUR BARU: WISHLIST VIEW -->
      <div id="wishlist-view" class="hidden pt-24 pb-12">
        <div class="container mx-auto px-8">
          <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-merriweather font-bold mb-4">
              Wishlist Mobil Anda
            </h1>
            <p class="text-lg text-stone-400">
              Simpan mobil yang Anda suka untuk dilihat nanti.
            </p>
          </div>

          <div
            id="wishlist-grid"
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
          >
            <!-- Wishlist items will be dynamically inserted here -->
          </div>

          <div id="wishlist-empty" class="hidden text-center py-20">
            <i class="fas fa-heart text-6xl text-stone-600 mb-4"></i>
            <h3 class="text-2xl font-semibold mb-2">Wishlist Anda Kosong</h3>
            <p class="text-stone-400 mb-6">
              Mulai tambahkan mobil yang Anda minati dengan mengeklik ikon hati.
            </p>
            <a href="#" id="back-to-inventory" class="btn-primary">
              <i class="fas fa-search mr-2"></i>Lihat Stok Mobil
            </a>
          </div>
        </div>
      </div>

      <!-- DETAIL VIEW -->
      <div id="detail-view" class="hidden pt-24 pb-12">
        <div class="container mx-auto px-8">
          <!-- Breadcrumb -->
          <div class="mb-6 text-sm text-stone-400">
            <a href="#" id="breadcrumb-home" class="hover:text-white"
              >Beranda</a
            >
            /
            <a
              href="#inventory"
              id="breadcrumb-inventory"
              class="hover:text-white"
              >Stok Mobil</a
            >
            /
            <span id="car-name-breadcrumb" class="text-white"
              >Detail Mobil</span
            >
          </div>

          <!-- Car Detail Section -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12">
            <!-- Image Gallery -->
            <div class="space-y-4">
              <div class="relative overflow-hidden rounded-xl">
                <img
                  id="main-image"
                  src=""
                  alt="Mobil"
                  class="w-full h-96 object-cover"
                />
              </div>
              <div id="thumbnail-container" class="grid grid-cols-4 gap-2">
                <!-- Thumbnails will be dynamically inserted here -->
              </div>
            </div>

            <!-- Car Information -->
            <div>
              <h1
                id="car-title"
                class="text-4xl font-merriweather font-bold mb-4"
              ></h1>
              <div class="flex items-center gap-4 mb-6">
                <span
                  id="car-year"
                  class="bg-stone-800 px-3 py-1 rounded-full text-sm"
                ></span>
                <span
                  id="car-transmission"
                  class="bg-stone-800 px-3 py-1 rounded-full text-sm"
                ></span>
                <span
                  id="car-mileage"
                  class="bg-stone-800 px-3 py-1 rounded-full text-sm"
                ></span>
              </div>
              <div
                class="text-3xl font-bold text-orange-600 mb-6"
                id="car-price"
              ></div>

              <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4">Deskripsi</h3>
                <p id="car-description" class="text-stone-400"></p>
              </div>

              <div class="grid grid-cols-2 gap-4 mb-8">
                <div class="bg-stone-800 p-4 rounded-lg">
                  <i class="fas fa-car text-orange-600 mb-2"></i>
                  <p class="text-sm text-stone-400">Tipe Mobil</p>
                  <p id="car-type" class="font-semibold"></p>
                </div>
                <div class="bg-stone-800 p-4 rounded-lg">
                  <i class="fas fa-gas-pump text-orange-600 mb-2"></i>
                  <p class="text-sm text-stone-400">Bahan Bakar</p>
                  <p id="car-fuel" class="font-semibold"></p>
                </div>
                <div class="bg-stone-800 p-4 rounded-lg">
                  <i class="fas fa-users text-orange-600 mb-2"></i>
                  <p class="text-sm text-stone-400">Kapasitas</p>
                  <p id="car-seats" class="font-semibold"></p>
                </div>
                <div class="bg-stone-800 p-4 rounded-lg">
                  <i class="fas fa-cogs text-orange-600 mb-2"></i>
                  <p class="text-sm text-stone-400">Warna</p>
                  <p id="car-color" class="font-semibold"></p>
                </div>
              </div>

              <div class="flex flex-col sm:flex-row gap-4">
                <a
                  href="https://wa.me/628123456789?text=Halo%20KendaraanKu,%20saya%20tertarik%20dengan%20mobil%20ini"
                  target="_blank"
                  class="btn-primary text-center"
                >
                  <i class="fab fa-whatsapp mr-2"></i>Tanya Harga
                </a>
                <button id="test-drive-btn" class="btn-secondary text-center">
                  <i class="fas fa-calendar-check mr-2"></i>Jadwalkan Test Drive
                </button>
              </div>
            </div>
          </div>

          <!-- Tabs Section -->
          <div class="bg-stone-800 rounded-xl p-8">
            <div class="tab-nav flex flex-wrap gap-6 mb-8">
              <button
                class="tab-btn active text-lg font-semibold pb-2"
                data-tab="specifications"
              >
                Spesifikasi
              </button>
              <button
                class="tab-btn text-lg font-semibold pb-2"
                data-tab="features"
              >
                Fitur
              </button>
              <button
                class="tab-btn text-lg font-semibold pb-2"
                data-tab="inspection"
              >
                Hasil Inspeksi
              </button>
              <button
                class="tab-btn text-lg font-semibold pb-2"
                data-tab="documents"
              >
                Dokumen
              </button>
            </div>

            <!-- Specifications Tab -->
            <div id="specifications-tab" class="tab-content">
              <h3 class="text-2xl font-semibold mb-6">Spesifikasi Lengkap</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                  <h4 class="text-lg font-semibold mb-4 text-orange-600">
                    Mesin
                  </h4>
                  <table class="spec-table w-full">
                    <tr>
                      <td class="py-2 text-stone-400">Tipe Mesin</td>
                      <td class="py-2 text-right" id="engine-type"></td>
                    </tr>
                    <tr>
                      <td class="py-2 text-stone-400">Kapasitas Mesin</td>
                      <td class="py-2 text-right" id="engine-capacity"></td>
                    </tr>
                    <tr>
                      <td class="py-2 text-stone-400">Daya Maksimum</td>
                      <td class="py-2 text-right" id="engine-power"></td>
                    </tr>
                    <tr>
                      <td class="py-2 text-stone-400">Torsi Maksimum</td>
                      <td class="py-2 text-right" id="engine-torque"></td>
                    </tr>
                    <tr>
                      <td class="py-2 text-stone-400">Sistem Bahan Bakar</td>
                      <td class="py-2 text-right" id="fuel-system"></td>
                    </tr>
                  </table>
                </div>
                <div>
                  <h4 class="text-lg font-semibold mb-4 text-orange-600">
                    Dimensi
                  </h4>
                  <table class="spec-table w-full">
                    <tr>
                      <td class="py-2 text-stone-400">Panjang</td>
                      <td class="py-2 text-right" id="length"></td>
                    </tr>
                    <tr>
                      <td class="py-2 text-stone-400">Lebar</td>
                      <td class="py-2 text-right" id="width"></td>
                    </tr>
                    <tr>
                      <td class="py-2 text-stone-400">Tinggi</td>
                      <td class="py-2 text-right" id="height"></td>
                    </tr>
                    <tr>
                      <td class="py-2 text-stone-400">Jarak Sumbu Roda</td>
                      <td class="py-2 text-right" id="wheelbase"></td>
                    </tr>
                    <tr>
                      <td class="py-2 text-stone-400">Berat Kosong</td>
                      <td class="py-2 text-right" id="weight"></td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>

            <!-- Features Tab -->
            <div id="features-tab" class="tab-content hidden">
              <h3 class="text-2xl font-semibold mb-6">Fitur Mobil</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                  <h4 class="text-lg font-semibold mb-4 text-orange-600">
                    Eksterior
                  </h4>
                  <ul id="exterior-features" class="space-y-2"></ul>
                </div>
                <div>
                  <h4 class="text-lg font-semibold mb-4 text-orange-600">
                    Interior
                  </h4>
                  <ul id="interior-features" class="space-y-2"></ul>
                </div>
                <div>
                  <h4 class="text-lg font-semibold mb-4 text-orange-600">
                    Keselamatan
                  </h4>
                  <ul id="safety-features" class="space-y-2"></ul>
                </div>
                <div>
                  <h4 class="text-lg font-semibold mb-4 text-orange-600">
                    Hiburan
                  </h4>
                  <ul id="entertainment-features" class="space-y-2"></ul>
                </div>
              </div>
            </div>

            <!-- Inspection Tab -->
            <div id="inspection-tab" class="tab-content hidden">
              <h3 class="text-2xl font-semibold mb-6">Hasil Inspeksi</h3>
              <div class="bg-stone-700 p-6 rounded-lg mb-6">
                <div class="flex items-center justify-between mb-4">
                  <h4 class="text-lg font-semibold">Kondisi Mobil</h4>
                  <span
                    class="bg-green-600 text-white px-3 py-1 rounded-full text-sm"
                    >Lulus Inspeksi</span
                  >
                </div>
                <p class="text-stone-300 mb-4">
                  Mobil telah melalui 175 titik pemeriksaan teknis dan dokumen
                  oleh tim ahli kami.
                </p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                  <div class="text-center">
                    <div
                      class="w-16 h-16 mx-auto bg-green-600 rounded-full flex items-center justify-center mb-2"
                    >
                      <i class="fas fa-check text-white text-xl"></i>
                    </div>
                    <p class="text-sm">Mesin</p>
                  </div>
                  <div class="text-center">
                    <div
                      class="w-16 h-16 mx-auto bg-green-600 rounded-full flex items-center justify-center mb-2"
                    >
                      <i class="fas fa-check text-white text-xl"></i>
                    </div>
                    <p class="text-sm">Transmisi</p>
                  </div>
                  <div class="text-center">
                    <div
                      class="w-16 h-16 mx-auto bg-green-600 rounded-full flex items-center justify-center mb-2"
                    >
                      <i class="fas fa-check text-white text-xl"></i>
                    </div>
                    <p class="text-sm">Rem</p>
                  </div>
                  <div class="text-center">
                    <div
                      class="w-16 h-16 mx-auto bg-green-600 rounded-full flex items-center justify-center mb-2"
                    >
                      <i class="fas fa-check text-white text-xl"></i>
                    </div>
                    <p class="text-sm">Kelistrikan</p>
                  </div>
                </div>
              </div>
              <div class="bg-stone-700 p-6 rounded-lg">
                <h4 class="text-lg font-semibold mb-4">Detail Pemeriksaan</h4>
                <table class="spec-table w-full">
                  <tr>
                    <td class="py-2 text-stone-400">Tanggal Inspeksi</td>
                    <td class="py-2 text-right" id="inspection-date"></td>
                  </tr>
                  <tr>
                    <td class="py-2 text-stone-400">Inspektor</td>
                    <td class="py-2 text-right" id="inspector"></td>
                  </tr>
                  <tr>
                    <td class="py-2 text-stone-400">Kilometer Saat Inspeksi</td>
                    <td class="py-2 text-right" id="inspection-mileage"></td>
                  </tr>
                  <tr>
                    <td class="py-2 text-stone-400">Nomor Laporan</td>
                    <td class="py-2 text-right" id="report-number"></td>
                  </tr>
                </table>
              </div>
            </div>

            <!-- Documents Tab -->
            <div id="documents-tab" class="tab-content hidden">
              <h3 class="text-2xl font-semibold mb-6">Dokumen Mobil</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-stone-700 p-6 rounded-lg">
                  <h4 class="text-lg font-semibold mb-4">Dokumen Kendaraan</h4>
                  <ul class="space-y-3">
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>BPKB Asli</span>
                    </li>
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>STNK Aktif</span>
                    </li>
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>Faktur Pembelian</span>
                    </li>
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>Buku Manual</span>
                    </li>
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>Kunci Serep</span>
                    </li>
                  </ul>
                </div>
                <div class="bg-stone-700 p-6 rounded-lg">
                  <h4 class="text-lg font-semibold mb-4">
                    Riwayat Pemeliharaan
                  </h4>
                  <ul class="space-y-3">
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>Service Berkala</span>
                    </li>
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>Buku Service Lengkap</span>
                    </li>
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>Tidak Pernah Tabrakan</span>
                    </li>
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>Tidak Pernah Kebanjiran</span>
                    </li>
                    <li class="flex items-center">
                      <i class="fas fa-check-circle text-green-600 mr-3"></i
                      ><span>Odometer Asli</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Similar Cars Section -->
          <div class="mt-16">
            <h3 class="text-2xl font-merriweather font-bold mb-8">
              Mobil Serupa
            </h3>
            <div
              id="similar-cars-grid"
              class="grid grid-cols-1 md:grid-cols-3 gap-8"
            >
              <!-- Similar cars will be dynamically inserted here -->
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Test Drive Modal -->
    <div
      id="test-drive-modal"
      class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4"
    >
      <div class="bg-stone-800 rounded-xl max-w-md w-full p-8">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-2xl font-semibold">Jadwalkan Test Drive</h3>
          <button id="close-modal" class="text-stone-400 hover:text-white">
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>
        <form id="test-drive-form">
          <div class="mb-4">
            <label
              for="name"
              class="block text-sm font-medium text-stone-400 mb-2"
              >Nama Lengkap</label
            >
            <input
              type="text"
              id="name"
              class="form-input w-full px-4 py-3 rounded-lg"
              required
            />
          </div>
          <div class="mb-4">
            <label
              for="phone"
              class="block text-sm font-medium text-stone-400 mb-2"
              >Nomor Telepon</label
            >
            <input
              type="tel"
              id="phone"
              class="form-input w-full px-4 py-3 rounded-lg"
              required
            />
          </div>
          <div class="mb-4">
            <label
              for="date"
              class="block text-sm font-medium text-stone-400 mb-2"
              >Tanggal Test Drive</label
            >
            <input
              type="date"
              id="date"
              class="form-input w-full px-4 py-3 rounded-lg"
              required
            />
          </div>
          <div class="mb-6">
            <label
              for="time"
              class="block text-sm font-medium text-stone-400 mb-2"
              >Waktu</label
            >
            <select
              id="time"
              class="form-input w-full px-4 py-3 rounded-lg"
              required
            >
              <option value="">Pilih Waktu</option>
              <option value="09:00">09:00</option>
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="13:00">13:00</option>
              <option value="14:00">14:00</option>
              <option value="15:00">15:00</option>
              <option value="16:00">16:00</option>
            </select>
          </div>
          <button
            type="submit"
            class="btn-primary w-full py-3 rounded-lg text-lg font-bold"
          >
            <i class="fas fa-check mr-2"></i>Kirim Permintaan
          </button>
        </form>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-stone-950 border-t border-stone-800 py-12">
      <div class="container mx-auto px-8 text-center">
        <p class="text-stone-500">
          &copy; 2024 KendaraanKu. Semua hak dilindungi.
        </p>
        <p class="text-sm text-stone-600 mt-2">
          Dikembangkan oleh
          <span class="text-orange-600 font-semibold"
            >[Nama Jasa Web Anda]</span
          >
        </p>
      </div>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // --- DATA MOBIL LENGKAP ---
        const allCars = [
          {
            id: 1,
            name: "Toyota Avanza 1.5 Veloz",
            brand: "toyota",
            price: 235000000,
            stock: 3,
            image:
              "https://images.unsplash.com/photo-1617654112369-4031cb95212c?q=80&w=1974",
            year: 2022,
            transmission: "Manual",
            mileage: "30.000 KM",
            type: "mpv",
            isBestSeller: true /* ... other car data ... */,
          },
          {
            id: 2,
            name: "Daihatsu Xenia 1.5 R Deluxe",
            brand: "daihatsu",
            price: 195000000,
            stock: 5,
            image:
              "https://images.unsplash.com/photo-1606664515524-ed2f786a0bd6?q=80&w=2070",
            year: 2021,
            transmission: "Manual",
            mileage: "45.000 KM",
            type: "mpv",
            isBestSeller: false /* ... other car data ... */,
          },
          {
            id: 3,
            name: "Suzuki Ertiga GX",
            brand: "suzuki",
            price: 210000000,
            stock: 2,
            image:
              "https://images.unsplash.com/photo-1580273916550-e323be2ae537?q=80&w=2070",
            year: 2022,
            transmission: "Automatic",
            mileage: "25.000 KM",
            type: "mpv",
            isBestSeller: true /* ... other car data ... */,
          },
          {
            id: 4,
            name: "Honda Brio Satya E CVT",
            brand: "honda",
            price: 185000000,
            stock: 7,
            image:
              "https://images.unsplash.com/photo-1619465919446-72268318b7e2?q=80&w=2070",
            year: 2021,
            transmission: "Automatic",
            mileage: "40.000 KM",
            type: "hatchback",
            isBestSeller: true /* ... other car data ... */,
          },
          {
            id: 5,
            name: "Toyota Agya 1.2 G TRD",
            brand: "toyota",
            price: 145000000,
            stock: 4,
            image:
              "https://images.unsplash.com/photo-1617654112369-4031cb95212c?q=80&w=1974",
            year: 2020,
            transmission: "Manual",
            mileage: "60.000 KM",
            type: "hatchback",
            isBestSeller: false /* ... other car data ... */,
          },
          {
            id: 6,
            name: "Honda Mobilio E CVT",
            brand: "honda",
            price: 190000000,
            stock: 1,
            image:
              "https://images.unsplash.com/photo-1580273916550-e323be2ae537?q=80&w=2070",
            year: 2020,
            transmission: "Automatic",
            mileage: "65.000 KM",
            type: "mpv",
            isBestSeller: false /* ... other car data ... */,
          },
          {
            id: 7,
            name: "Mitsubishi Xpander Ultimate",
            brand: "mitsubishi",
            price: 275000000,
            stock: 3,
            image:
              "https://images.unsplash.com/photo-1605559424843-9e4c228bf1c2?q=80&w=1964",
            year: 2022,
            transmission: "Automatic",
            mileage: "22.000 KM",
            type: "mpv",
            isBestSeller: true /* ... other car data ... */,
          },
          {
            id: 8,
            name: "Toyota Rush 1.5 G M/T",
            brand: "toyota",
            price: 260000000,
            stock: 2,
            image:
              "https://images.unsplash.com/photo-1550355291-bbee04a92027?q=80&w=2070",
            year: 2021,
            transmission: "Manual",
            mileage: "35.000 KM",
            type: "suv",
            isBestSeller: false /* ... other car data ... */,
          },
          {
            id: 9,
            name: "Daihatsu Terios R Custom",
            brand: "daihatsu",
            price: 245000000,
            stock: 4,
            image:
              "https://images.unsplash.com/photo-1606664515524-ed2f786a0bd6?q=80&w=2070",
            year: 2022,
            transmission: "Automatic",
            mileage: "28.000 KM",
            type: "suv",
            isBestSeller: false /* ... other car data ... */,
          },
          {
            id: 10,
            name: "Suzuki Ignis GX AGS",
            brand: "suzuki",
            price: 175000000,
            stock: 6,
            image:
              "https://images.unsplash.com/photo-1619465919446-72268318b7e2?q=80&w=2070",
            year: 2022,
            transmission: "Automatic",
            mileage: "20.000 KM",
            type: "hatchback",
            isBestSeller: false /* ... other car data ... */,
          },
          {
            id: 11,
            name: "Honda Jazz RS CVT",
            brand: "honda",
            price: 280000000,
            stock: 1,
            image:
              "https://images.unsplash.com/photo-1542362567-b07e54358753?q=80&w=2070",
            year: 2021,
            transmission: "Automatic",
            mileage: "30.000 KM",
            type: "hatchback",
            isBestSeller: true /* ... other car data ... */,
          },
          {
            id: 12,
            name: "Toyota Yaris G MT",
            brand: "toyota",
            price: 265000000,
            stock: 3,
            image:
              "https://images.unsplash.com/photo-1617654112369-4031cb95212c?q=80&w=1974",
            year: 2020,
            transmission: "Manual",
            mileage: "50.000 KM",
            type: "hatchback",
            isBestSeller: false /* ... other car data ... */,
          },
        ];
        // To save space, I've truncated the car data. Please use the full car data from the previous response.
        // Just replace the `/* ... other car data ... */` with the actual data for each car object.

        // --- GLOBAL VARIABLES ---
        const homeView = document.getElementById("home-view");
        const detailView = document.getElementById("detail-view");
        const tradeInView = document.getElementById("trade-in-view");
        const wishlistView = document.getElementById("wishlist-view");

        const carGrid = document.getElementById("car-grid");
        const noResultsDiv = document.getElementById("no-results");
        const loadMoreBtn = document.getElementById("load-more-btn");
        const loadingSpinner = document.getElementById("loading-spinner");
        const compareBtn = document.getElementById("compare-btn");
        const compareCountSpan = document.getElementById("compare-count");

        let carsToCompare = new Set();
        let currentPage = 0;
        const carsPerPage = 6;
        let filteredCars = [...allCars];
        let currentCar = null;

        // --- FITUR BARU: Wishlist Variables ---
        let wishlist = JSON.parse(localStorage.getItem("carWishlist")) || [];
        const wishlistCountSpan = document.getElementById("wishlist-count");
        const wishlistGrid = document.getElementById("wishlist-grid");
        const wishlistEmptyDiv = document.getElementById("wishlist-empty");

        // --- FITUR BARU: Trade-in Variables ---
        let currentTradeInStep = 1;
        const formSteps = document.querySelectorAll(".form-step");

        // --- HELPER FUNCTIONS ---
        function formatRupiah(amount) {
          return new Intl.NumberFormat("id-ID", {
            style: "currency",
            currency: "IDR",
            minimumFractionDigits: 0,
          }).format(amount);
        }

        function updateCompareButton() {
          compareCountSpan.textContent = carsToCompare.size;
          compareBtn.disabled = carsToCompare.size < 2;
        }

        // --- FITUR BARU: Wishlist Helper ---
        function updateWishlistButton(carId) {
          const button = document.querySelector(
            `.wishlist-btn[data-car-id="${carId}"] i`
          );
          if (wishlist.includes(carId)) {
            button.classList.remove("far");
            button.classList.add("fas", "active");
          } else {
            button.classList.remove("fas", "active");
            button.classList.add("far");
          }
        }

        function updateWishlistCount() {
          wishlistCountSpan.textContent = wishlist.length;
        }

        function saveWishlist() {
          localStorage.setItem("carWishlist", JSON.stringify(wishlist));
        }

        // --- VIEW MANAGEMENT ---
        function hideAllViews() {
          homeView.classList.add("hidden");
          detailView.classList.add("hidden");
          tradeInView.classList.add("hidden");
          wishlistView.classList.add("hidden");
        }

        function showHomeView() {
          hideAllViews();
          homeView.classList.remove("hidden");
          window.scrollTo(0, 0);
          handleScrollReveal();
        }

        function showCarDetail(carId) {
          currentCar = allCars.find((c) => c.id == carId);
          if (!currentCar) return;

          // Populate Detail View (code from previous response)
          document.getElementById("car-name-breadcrumb").textContent =
            currentCar.name;
          document.getElementById("car-title").textContent = currentCar.name;
          document.getElementById("car-year").textContent = currentCar.year;
          document.getElementById("car-transmission").textContent =
            currentCar.transmission;
          document.getElementById("car-mileage").textContent =
            currentCar.mileage;
          document.getElementById("car-price").textContent = formatRupiah(
            currentCar.price
          );
          document.getElementById("car-description").textContent =
            currentCar.description;
          document.getElementById("car-type").textContent =
            currentCar.type.toUpperCase();
          document.getElementById("car-fuel").textContent = currentCar.fuel;
          document.getElementById("car-seats").textContent = currentCar.seats;
          document.getElementById("car-color").textContent = currentCar.color;

          // Populate Images, Specs, Features, Inspection, Similar Cars (code from previous response)
          // ... (copy all the population logic from the previous full code here) ...

          // Show Detail View
          hideAllViews();
          detailView.classList.remove("hidden");
          window.scrollTo(0, 0);
        }

        // --- FITUR BARU: Trade-in View Management ---
        function showTradeInView() {
          hideAllViews();
          tradeInView.classList.remove("hidden");
          window.scrollTo(0, 0);
          resetTradeInForm();
        }

        function showTradeInStep(step) {
          formSteps.forEach((s) => s.classList.remove("active"));
          document.getElementById(`step-${step}`).classList.add("active");
          currentTradeInStep = step;
        }

        function resetTradeInForm() {
          document.getElementById("trade-in-form").reset();
          showTradeInStep(1);
        }

        function calculateTradeInEstimation() {
          // This is a very simple estimation logic. In a real app, this would be more complex.
          const basePrice = 150000000; // Base price for an average car
          const year = parseInt(document.getElementById("trade-year").value);
          const mileage = parseInt(
            document.getElementById("trade-mileage").value
          );
          const engineCond = document.getElementById(
            "trade-engine-condition"
          ).value;
          const bodyCond = document.getElementById(
            "trade-body-condition"
          ).value;

          let estimation = basePrice;
          const currentYear = new Date().getFullYear();
          const age = currentYear - year;
          estimation -= age * 10000000; // Subtract 10jt per year
          estimation -= (mileage / 1000) * 500000; // Subtract 500k per 1000km

          if (engineCond === "Sangat Baik") estimation += 10000000;
          if (engineCond === "Buruk") estimation -= 20000000;
          if (bodyCond === "Mulus Original") estimation += 15000000;
          if (bodyCond === "Pernah Disepuh") estimation -= 10000000;

          return Math.max(estimation, 50000000); // Minimum price
        }

        // --- FITUR BARU: Wishlist View Management ---
        function showWishlistView() {
          hideAllViews();
          wishlistView.classList.remove("hidden");
          renderWishlist();
          window.scrollTo(0, 0);
        }

        function renderWishlist() {
          wishlistGrid.innerHTML = "";
          if (wishlist.length === 0) {
            wishlistGrid.classList.add("hidden");
            wishlistEmptyDiv.classList.remove("hidden");
          } else {
            wishlistGrid.classList.remove("hidden");
            wishlistEmptyDiv.classList.add("hidden");
            wishlist.forEach((carId) => {
              const car = allCars.find((c) => c.id === carId);
              if (!car) return;
              const carCard = document.createElement("div");
              carCard.className = "car-card rounded-xl overflow-hidden";
              carCard.innerHTML = `
                            <div class="relative h-56 overflow-hidden"><img src="${
                              car.image
                            }" alt="${
                car.name
              }" class="w-full h-full object-cover"></div>
                            <div class="p-6">
                                <h3 class="text-xl font-semibold mb-2">${
                                  car.name
                                }</h3>
                                <p class="text-stone-400 text-sm mb-4">${
                                  car.year
                                } | ${car.transmission} | ${car.mileage}</p>
                                <p class="text-2xl font-bold text-orange-600 mb-4">${formatRupiah(
                                  car.price
                                )}</p>
                                <div class="flex gap-2">
                                    <button class="btn-primary text-sm flex-1 view-detail-btn" data-car-id="${
                                      car.id
                                    }">
                                        <i class="fas fa-eye mr-2"></i>Lihat Detail
                                    </button>
                                    <button class="btn-secondary text-sm wishlist-btn" data-car-id="${
                                      car.id
                                    }" title="Hapus dari Wishlist">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                </div>
                            </div>
                        `;
              wishlistGrid.appendChild(carCard);
            });
          }
        }

        // --- RENDER FUNCTIONS ---
        function renderCars(append = false) {
          const startIndex = append ? currentPage * carsPerPage : 0;
          const endIndex = startIndex + carsPerPage;
          const carsToShow = filteredCars.slice(startIndex, endIndex);

          if (!append) carGrid.innerHTML = "";

          if (carsToShow.length === 0 && !append) {
            noResultsDiv.classList.remove("hidden");
            loadMoreBtn.classList.add("hidden");
          } else {
            noResultsDiv.classList.add("hidden");
            carsToShow.forEach((car, index) => {
              const carCard = document.createElement("div");
              carCard.className = "car-card rounded-xl overflow-hidden reveal";
              carCard.style.transitionDelay = `${index * 0.1}s`;
              const isInWishlist = wishlist.includes(car.id);
              carCard.innerHTML = `
                            <div class="relative h-56 overflow-hidden">
                                <img src="${car.image}" alt="${
                car.name
              }" class="w-full h-full object-cover">
                                ${
                                  car.isBestSeller
                                    ? '<span class="absolute top-3 left-3 bg-orange-600 text-white text-xs font-bold px-3 py-1 rounded-full">TERLARIS</span>'
                                    : ""
                                }
                                <span class="absolute top-3 right-3 bg-stone-900/80 text-white text-xs font-semibold px-3 py-1 rounded-full">Stok: ${
                                  car.stock
                                }</span>
                            </div>
                            <div class="p-6">
                                <h3 class="text-xl font-semibold mb-2">${
                                  car.name
                                }</h3>
                                <p class="text-stone-400 text-sm mb-4">${
                                  car.year
                                } | ${car.transmission} | ${car.mileage}</p>
                                <p class="text-2xl font-bold text-orange-600 mb-4">${formatRupiah(
                                  car.price
                                )}</p>
                                <div class="flex items-center justify-between">
                                    <button class="btn-primary text-sm view-detail-btn" data-car-id="${
                                      car.id
                                    }">
                                        <i class="fas fa-eye mr-2"></i>Lihat Detail
                                    </button>
                                    <div class="flex items-center gap-3">
                                        <button class="wishlist-btn text-stone-400 hover:text-red-500 transition-colors" data-car-id="${
                                          car.id
                                        }" title="Tambah ke Wishlist">
                                            <i class="${
                                              isInWishlist
                                                ? "fas active"
                                                : "far"
                                            } fa-heart text-xl"></i>
                                        </button>
                                        <div class="flex items-center">
                                            <input type="checkbox" class="compare-checkbox" data-car-id="${
                                              car.id
                                            }">
                                            <label class="ml-2 text-sm text-stone-400 cursor-pointer">Bandingkan</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
              carGrid.appendChild(carCard);
            });

            document
              .querySelectorAll(".compare-checkbox")
              .forEach((checkbox) => {
                checkbox.addEventListener("change", (e) => {
                  const carId = e.target.dataset.carId;
                  if (e.target.checked) {
                    if (carsToCompare.size >= 3) {
                      e.target.checked = false;
                      alert("Maksimal 3 mobil untuk dibandingkan.");
                      return;
                    }
                    carsToCompare.add(carId);
                  } else {
                    carsToCompare.delete(carId);
                  }
                  updateCompareButton();
                });
              });
            handleScrollReveal();
          }

          if (endIndex >= filteredCars.length) {
            loadMoreBtn.classList.add("hidden");
          } else {
            loadMoreBtn.classList.remove("hidden");
          }
        }

        // --- EVENT LISTENERS ---
        // Event Delegation for "Lihat Detail" and "Wishlist" buttons
        document.addEventListener("click", (e) => {
          // View Detail Button
          const viewDetailBtn = e.target.closest(".view-detail-btn");
          if (viewDetailBtn) {
            e.preventDefault();
            const carId = viewDetailBtn.dataset.carId;
            showCarDetail(carId);
          }

          // Wishlist Button
          const wishlistBtn = e.target.closest(".wishlist-btn");
          if (wishlistBtn) {
            e.preventDefault();
            e.stopPropagation();
            const carId = parseInt(wishlistBtn.dataset.carId);
            const index = wishlist.indexOf(carId);
            if (index > -1) {
              wishlist.splice(index, 1);
            } else {
              wishlist.push(carId);
            }
            saveWishlist();
            updateWishlistCount();
            updateWishlistButton(carId);
            // If on wishlist page, re-render
            if (!wishlistView.classList.contains("hidden")) {
              renderWishlist();
            }
          }
        });

        // Load More
        loadMoreBtn.addEventListener("click", () => {
          currentPage++;
          loadMoreBtn.classList.add("hidden");
          loadingSpinner.classList.remove("hidden");
          setTimeout(() => {
            renderCars(true);
            loadingSpinner.classList.add("hidden");
          }, 800);
        });

        // Filter
        document.getElementById("filter-btn").addEventListener("click", () => {
          currentPage = 0;
          const brand = document.getElementById("filter-brand").value;
          const price = document.getElementById("filter-price").value;
          const type = document.getElementById("filter-type").value;
          filteredCars = allCars.filter((car) => {
            const matchBrand = brand === "all" || car.brand === brand;
            let matchPrice = true;
            if (price === "0-200") matchPrice = car.price < 200000000;
            if (price === "200-350")
              matchPrice = car.price >= 200000000 && car.price <= 350000000;
            if (price === "350+") matchPrice = car.price > 350000000;
            const matchType = type === "all" || car.type === type;
            return matchBrand && matchPrice && matchType;
          });
          renderCars();
        });

        // Compare Button
        compareBtn.addEventListener("click", () => {
          if (carsToCompare.size < 2) return;
          const carNames = Array.from(
            document.querySelectorAll(".compare-checkbox:checked")
          )
            .map((cb) => {
              const carId = cb.dataset.carId;
              return allCars.find((c) => c.id == carId).name;
            })
            .join(", ");
          alert(
            `Anda membandingkan: ${carNames}. (Fitur halaman perbandingan dapat dikembangkan lebih lanjut)`
          );
        });

        // Credit Simulation
        document
          .getElementById("calculate-btn")
          .addEventListener("click", () => {
            const carPrice =
              parseFloat(document.getElementById("car-price").value) || 0;
            const dpAmount =
              parseFloat(document.getElementById("dp").value) || 0;
            const tenorYears = parseInt(document.getElementById("tenor").value);
            if (carPrice <= 0) {
              alert("Masukkan harga mobil yang valid.");
              return;
            }
            const principal = carPrice - dpAmount;
            const rate = 0.09;
            const monthlyRate = rate / 12;
            const totalMonths = tenorYears * 12;
            const installment =
              (principal *
                (monthlyRate * Math.pow(1 + monthlyRate, totalMonths))) /
              (Math.pow(1 + monthlyRate, totalMonths) - 1);
            document.getElementById("monthly-installment").textContent =
              formatRupiah(installment);
            document.getElementById("credit-result").classList.remove("hidden");
          });

        // Test Drive Modal
        const testDriveModal = document.getElementById("test-drive-modal");
        const testDriveForm = document.getElementById("test-drive-form");
        document
          .getElementById("test-drive-btn")
          .addEventListener("click", () =>
            testDriveModal.classList.remove("hidden")
          );
        document
          .getElementById("close-modal")
          .addEventListener("click", () =>
            testDriveModal.classList.add("hidden")
          );
        testDriveModal.addEventListener("click", (e) => {
          if (e.target === testDriveModal)
            testDriveModal.classList.add("hidden");
        });
        testDriveForm.addEventListener("submit", (e) => {
          e.preventDefault();
          const name = document.getElementById("name").value;
          const phone = document.getElementById("phone").value;
          const date = document.getElementById("date").value;
          const time = document.getElementById("time").value;
          const message = `Halo KendaraanKu, saya ingin menjadwalkan test drive untuk mobil ${currentCar.name}:\n\nNama: ${name}\nTelepon: ${phone}\nTanggal: ${date}\nWaktu: ${time}`;
          window.open(
            `https://wa.me/628123456789?text=${encodeURIComponent(message)}`,
            "_blank"
          );
          testDriveForm.reset();
          testDriveModal.classList.add("hidden");
        });

        // Tab Navigation
        document.querySelectorAll(".tab-btn").forEach((button) => {
          button.addEventListener("click", () => {
            const tabName = button.dataset.tab;
            document
              .querySelectorAll(".tab-btn")
              .forEach((btn) => btn.classList.remove("active"));
            button.classList.add("active");
            document.querySelectorAll(".tab-content").forEach((content) => {
              content.id === `${tabName}-tab`
                ? content.classList.remove("hidden")
                : content.classList.add("hidden");
            });
          });
        });

        // --- FITUR BARU: Trade-in Form Listeners ---
        document
          .getElementById("nav-trade-in")
          .addEventListener("click", (e) => {
            e.preventDefault();
            showTradeInView();
          });
        document
          .getElementById("hero-trade-in-btn")
          .addEventListener("click", () => showTradeInView());

        document.querySelectorAll(".btn-next").forEach((btn) => {
          btn.addEventListener("click", () => {
            // Basic validation can be added here
            if (currentTradeInStep < 3) {
              showTradeInStep(currentTradeInStep + 1);
            }
          });
        });

        document.querySelectorAll(".btn-prev").forEach((btn) => {
          btn.addEventListener("click", () => {
            if (currentTradeInStep > 1) {
              showTradeInStep(currentTradeInStep - 1);
            }
          });
        });

        document
          .getElementById("trade-in-form")
          .addEventListener("submit", (e) => {
            e.preventDefault();
            const estimation = calculateTradeInEstimation();
            document.getElementById("trade-estimation").textContent =
              formatRupiah(estimation);

            const name = document.getElementById("trade-name").value;
            const phone = document.getElementById("trade-phone").value;
            const brand = document.getElementById("trade-brand").value;
            const model = document.getElementById("trade-model").value;

            const message = `Halo KendaraanKu, saya baru saja mengajukan penawaran untuk mobil saya.\n\nNama: ${name}\nTelepon: ${phone}\nMobil: ${brand} ${model}\n\nEstimasi saya: ${formatRupiah(
              estimation
            )}. Mohon untuk segera diproses.`;
            const waLink = `https://wa.me/628123456789?text=${encodeURIComponent(
              message
            )}`;
            document.getElementById("trade-whatsapp-link").href = waLink;

            showTradeInStep("result");
          });

        document
          .querySelector(".btn-reset")
          .addEventListener("click", resetTradeInForm);

        // --- FITUR BARU: Wishlist Listeners ---
        document
          .getElementById("nav-wishlist")
          .addEventListener("click", (e) => {
            e.preventDefault();
            showWishlistView();
          });
        document
          .getElementById("back-to-inventory")
          .addEventListener("click", (e) => {
            e.preventDefault();
            showHomeView();
          });

        // Navigation Links
        document.getElementById("nav-logo").addEventListener("click", (e) => {
          e.preventDefault();
          showHomeView();
        });
        document
          .getElementById("breadcrumb-home")
          .addEventListener("click", (e) => {
            e.preventDefault();
            showHomeView();
          });
        document
          .getElementById("breadcrumb-inventory")
          .addEventListener("click", (e) => {
            e.preventDefault();
            showHomeView();
            document.getElementById("inventory").scrollIntoView();
          });
        document
          .getElementById("nav-inventory")
          .addEventListener("click", (e) => {
            e.preventDefault();
            showHomeView();
            document.getElementById("inventory").scrollIntoView();
          });

        // Reveal on Scroll
        function handleScrollReveal() {
          const reveals = document.querySelectorAll(".reveal:not(.active)");
          reveals.forEach((element) => {
            const windowHeight = window.innerHeight;
            const elementTop = element.getBoundingClientRect().top;
            const elementVisible = 150;
            if (elementTop < windowHeight - elementVisible)
              element.classList.add("active");
          });
        }
        window.addEventListener("scroll", handleScrollReveal);

        // Navbar on scroll
        window.addEventListener("scroll", () => {
          const navbar = document.getElementById("navbar");
          if (window.scrollY > 50) navbar.classList.add("navbar-scrolled");
          else navbar.classList.remove("navbar-scrolled");
        });

        // --- INITIALIZATION ---
        renderCars();
        updateWishlistCount();
        handleScrollReveal();
      });
    </script>
  </body>
</html>
